{
    "collab_server" : "",
    "contents" : "---\noutput: github_document\n---\n\n```{r, echo = FALSE}\nknitr::opts_chunk$set(\n  collapse = TRUE,\n  comment = \"#>\",\n  fig.path = \"README-\"\n)\n```\n\n# noaamsdr\n\n[![Build Status](https://travis-ci.org/rhkaz/noaamsdr.svg?branch=master)](https://travis-ci.org/rhkaz/noaamsdr) \n\n[Building details](https://travis-ci.org/rhkaz/noaamsdr)\n\nThe goal of NOAACoursera is to create a package to manipulate and analyze the\neartquakes [NOAA dataset](NOAA). This project corresponds to the capstone project of the \n\"Mastering Software Development in R\" Coursera's specialisation.\n\n## Installation\n\nThis is a basic example which shows you how to solve a common problem:\n\n```{r, eval = FALSE}\ndevtools::install_github(\"rhkaz/noaamsdr\")\n```\n\n## Usage\n\nThe package currently contains functions to:\n\n- Get the dataset\n- Clean the variables\n- Visualize a timeline of the earthquakes\n- Visualize a map with the epicenters\n\n### Get data\nThis package will download and put the data in a persistent directory unless you\nspecify another path. Just write \n\n```{r}\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(noaamsdr)\neq_get_data() %>% glimpse\n```\n\nand you will have the complete raw NOAA dataset in a data.frame object.\n\n### Clean data\nBy default, all variables are imported as character. This is because we want to\nmake a more robust cleaning of the data. Again, just pass the dataframe to \nthe cleaning data and you will have a clean dataset with the types of each variable\ncorrected and some new variables that compact information (e.g. date column).\n\n```{r}\neq_get_data() %>% eq_clean_data %>% head\n```\n\n\n### Visualise a timeline of the dataset\nIt could be useful to visualize the earthquakes across time and other variables\nThis is implemented in a couple of ggplot2's geoms: \n\n```{r}\ndf <- eq_get_data () %>%\n  eq_clean_data %>%\n  filter(!is.na(EQ_PRIMARY)) %>%\n  filter(year(DATE) > 2000) %>%\n  filter(COUNTRY %in% c(\"CHINA\", \"USA\"))\nggplot(df) +\n  aes(\n    x = DATE,\n    y = COUNTRY,\n    size = EQ_PRIMARY,\n    colour = DEATHS,\n    label = LOCATION_NAME,\n    by = EQ_PRIMARY\n  ) +\n  geom_timeline() +\n  geom_timeline_label(n_max = 5) +\n  theme_timeline\n```\n\n### Visualize the earthquakes in a map\nA leaflet wrapper is implemented to easily visualize the epicenters:\n\n```{r, eval=F}\neq_get_data() %>%\n  eq_clean_data %>%\n  filter(COUNTRY == \"MEXICO\", year(DATE) >= 2000) %>%\n  eq_map(annot_col = \"DATE\")\n\neq_get_data() %>%\n  eq_clean_data %>%\n  filter(COUNTRY == \"MEXICO\", year(DATE) >= 2000) %>%\n  mutate(popup_text = eq_create_label(.)) %>%\n  eq_map(annot_col = \"popup_text\")\n```\n\n\n## References\n\n- National Geophysical Data Center / World Data Service (NGDC/WDS): \n  Significant Earthquake Database.\n  National Geophysical Data Center, NOAA. doi:10.7289/V5TD9V7K\n\n[NOAA]: https://www.ngdc.noaa.gov/nndc/struts/form?t=101650&s=1&d=1\n",
    "created" : 1494080156475.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3453244418",
    "id" : "9CAA8FD4",
    "lastKnownWriteTime" : 1494081808,
    "last_content_update" : 1494081808,
    "path" : "~/Desktop/noaamsdr/README.Rmd",
    "project_path" : "README.Rmd",
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}